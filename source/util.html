<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">( function ( M, $ ) {
	var util;

<span id='util'>	/**
</span>	 * Utility library for looking up details on the current user
	 * @class util
	 * @singleton
	 */
	util = {
<span id='util-method-escapeHash'>		/**
</span>		 * Escape dots and colons in a hash, jQuery doesn&#39;t like them beause they
		 * look like CSS classes and pseudoclasses. See
		 * http://bugs.jquery.com/ticket/5241
		 * http://stackoverflow.com/questions/350292/how-do-i-get-jquery-to-select-elements-with-a-period-in-their-id
		 *
		 * @method
		 * @param {String} hash A hash to escape
		 * @return {String}
		 */
		escapeHash: function ( hash ) {
			return hash.replace( /(:|\.)/g, &#39;\\$1&#39; );
		},
<span id='util-method-deParam'>		/**
</span>		 * Takes a Query string and turns it into a JavaScript object mapping parameter names
		 * to values. Does the opposite of $.param
		 *
		 * @method
		 * @param {String} qs A querystring excluding the ? prefix. e.g. foo=4&amp;bar=5
		 * @return {Object}
		 */
		deParam: function ( qs ) {
			var params = {};
			if ( qs ) {
				$.each( qs.split( &#39;&amp;&#39; ), function ( index, p ) {
					p = p.split( &#39;=&#39; );
					params[ p[0] ] = p[1];
				} );
			}
			return params;
		},
<span id='util-property-query'>		/**
</span>		 * Maps current query string parameters to their values.
		 *
		 * @property {Object} query
		 */
		query: {}
	};

	util.query = util.deParam( window.location.search.split( &#39;?&#39; )[1] );
	M.define( &#39;util&#39;, util );

}( mw.mobileFrontend, jQuery ) );
</pre>
</body>
</html>
